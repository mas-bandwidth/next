version: "3"

services:
  test_direct_default:
    build:
      context: ../../../../
      dockerfile: ./cmd/tools/functional/tests/Dockerfile
    environment:
      test: test_direct_default
    networks:
      - nn-net

  test_direct_upgrade:
    build:
      context: ../../../../
      dockerfile: ./cmd/tools/functional/tests/Dockerfile
    environment:
      test: test_direct_upgrade
    networks:
      - nn-net

  test_direct_no_upgrade:
    build:
      context: ../../../../
      dockerfile: ./cmd/tools/functional/tests/Dockerfile
    environment:
      test: test_direct_no_upgrade
    networks:
      - nn-net

  test_direct_with_backend:
    build:
      context: ../../../../
      dockerfile: ./cmd/tools/functional/tests/Dockerfile
    environment:
      test: test_direct_with_backend
    networks:
      - nn-net

  test_fallback_to_direct_without_backend:
    build:
      context: ../../../../
      dockerfile: ./cmd/tools/functional/tests/Dockerfile
    environment:
      test: test_fallback_to_direct_without_backend
    networks:
      - nn-net

  test_fallback_to_direct_is_not_sticky:
    build:
      context: ../../../../
      dockerfile: ./cmd/tools/functional/tests/Dockerfile
    environment:
      test: test_fallback_to_direct_is_not_sticky
    networks:
      - nn-net

  test_packets_over_next_with_relay_and_backend:
    build:
      context: ../../../../
      dockerfile: ./cmd/tools/functional/tests/Dockerfile
    environment:
      test: test_packets_over_next_with_relay_and_backend
    networks:
      - nn-net

  test_idempotent:
    build:
      context: ../../../../
      dockerfile: ./cmd/tools/functional/tests/Dockerfile
    environment:
      test: test_idempotent
    networks:
      - nn-net

  test_fallback_to_direct_when_backend_goes_down:
    build:
      context: ../../../../
      dockerfile: ./cmd/tools/functional/tests/Dockerfile
    environment:
      test: test_fallback_to_direct_when_backend_goes_down
    networks:
      - nn-net

networks:
  nn-net:
