DONE

	Setup projects and service accounts with terraform

	First, create a new terraform directory under "terraform/projects"

	Next, work out how to create all the projects.

	Work out how to enable various services on each project, eg. google compute, SQL, whatever.

	Configure services needed for each project

	Create storage buckets (need local.company_name)

	Upload starter files to storage buckets

	Create service accounts

	There should be a service account that represents terraform when it runs, and generally it should have admin access to do everything. I'd like this to be a single account, instead of the account that runs 

	There should be a more restricted, per-project service account that the services run under, and this one should be selectively given access to read/write to cloud storage buckets as needed only.

	Give the terraform service account write permission to both the backend artifact and relay artifact buckets.

	Export the terraform key and use it to setup semaphore.

	Verify that semaphore can write backend artifacts.

	Verify that semaphore can write relay artifacts.

	Verify that dev can actually get up
	
	There is some permission issue with dev runtime service account not being able to send pubsub messages from relay backend:

		Nov 01 00:26:36 relay-backend-8xl4 app[1717]: error: failed to send message batch: rpc error: code = PermissionDenied desc = User not authorized to perform this action.
		Nov 01 00:26:36 relay-backend-8xl4 app[1717]: error: failed to send message batch: rpc error: code = PermissionDenied desc = User not authorized to perform this action.

	What permission is required to let pubsub publish messages?

	roles/pubsub.publisher

	^----- theoretically, this has been added.

	Verify that I can load the create.sql into postgres

	Setup the "Development Relays" project in dev.

	Make sure compute engine is enabled.

	Do we need another service account? Probably yes?

TODO	

	Setup the relays/main.tf so it gets the project id from files under terraform/projects

	Make sure these output files are added to perforce.

	-------------

	Verify we can deploy relay binaries with semaphore

	-------------

	Verify that we can actually see https://portal-dev.virtualgo.net up.

	-------------

	Verify that I can setup relays in dev

	-------------

	Verify that I see green in dev

	-------------












	-------------

	Automatically setup the "development" database in postgres and load the create.sql

	Looks like this can only be done with gcloud:

		gcloud sql import sql INSTANCE_NAME gs://BUCKET_NAME/IMPORT_FILE_NAME --database=DATABASE_NAME

	-------------

	Configure script to set company name, modify stuff etc. Idea is run "./configure" and enter some data, and everything is setup for you. *** Zero work. ***

	Should also roll relay backend, server backend keys... api keys etc.
	
	-------------

	Work out how to pass project ids and so on from the "projects" terraform into the other terrafrom projects, so there are no manual steps.

	-------------




















































	----------

	Integrate new API key module in api.go

	---------- 

	Integrate map with portal

	----------

	Work out portal security model

	----------

	Finalize SDK

	----------

	Finalize UE5 plugin

	----------

	Fix singlethreaded relay

	----------

	Write documentation

	----------


























Small things:

	----------

	Sessions being out of order in the portal in staging is weird. I have no explanation for this, at the moment.

	----------

	Portal redis having 10-15 second 95th percentile write time seems bad @ 10M relays...

	----------

	Make sure the system can run with no relays in dev and production (eg. analysis only initially...)

	----------

	For providers like akamai, vultr, amazon, we need to prefix all resource names with env (because their aren't separate projects...)

	--------------

	Clean up old ip2location database files in server backend

	--------------

	Extend session update so it sends all sessions to portal below 100k sessions total, even if portal next sessions only is set

	--------------

	Y axis labels spill over the right side when they get up to 100,000, 1,000,000 etc... convert to 500K, 1M, 2M?

	--------------

	Current sessions on server doesn't seem to be correct, or at least, it is 181 when it should be just 1...

	--------------

	I need more space on a standard macbook air screen in the sessions list for longer ISP names

	Right now it is way too tight. A long ISP name would throw the whole layout off

	--------------

	Connection type detection needs to be brought back for all platforms in the SDK. On linux, connection type was 0 -> "Unknown"

	--------------

	Session counts on relays being 8 when relay backend restarts seems a bit suspicious. Are we not decrementing session counts somewhere?

	--------------

	Disable high priority threads by default on the server. It can cause problems when many server instances are run per-machine.

	--------------
