DONE

	Main thread next_client_t needs magic updated each time a route changes (new notify, next_notify_updated_magic...)

	Internal client needs to clear client external address and magic values on close session.

TODO

	--------------

	Client needs to use magic value and client external address on main thread packet send.

	--------------

	The server proxy session entry needs to (lazily) update the magic value post-route update ack. 

	New server notify.

	--------------

	Client needs to accept both previous and current magic on packet read.

	--------------

	Server needs to accept both previous and current magic on packet read.

	--------------

	Client should use magic value and client external address when sending packets to the server and relays.

	--------------

	Server should use magic per-session proxy entry and address of that session, when sending packets to a client.

	--------------

	At this point magic should theoretically be working... hahahahaha

	--------------






















	==================================
	Get the client/server upgrade working and the upgraded direct packets being exchanged between client and server.

	--------------

	Update the func backend 5 so it can handle new SDK5 packet types.

	--------------

	Get various upgraded direct func tests passing.

	--------------






























	========================================================

	--------------

	Work out how to get ping tokens down to the client

	--------------

	Get the client pinging near relays w. ping tokens and getting responses.

	--------------

	Update the reference relay so it can handle the new SDK5 packet types.

	--------------

	Get an actual end-to-end network next route going with SDK5 client/server.

	--------------

	Get the rest of the func tests passing.

	--------------

	=================================================

	--------------

	Move server whois to the backend, it's unreliable when run on the SDK server
	and the iteration time for fixes (new SDK deploy) is just too long.

	--------------

	We need a server flush method to timeout all sessions and flush session updates until acked.

	--------------
