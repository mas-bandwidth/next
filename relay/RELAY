DONE

	Add a zero magic mode to func backend

	Add a test for wrong size near relay packets

	Add a test for expired near relay packets

	Add a test for invalid signature near relay packets

	Generate a ping token and insert it into the near relay ping packet

	Insert a sequence number

	Add a test for valid near relay packets (respond with pong)

	Receive packets in the respond with pong test, and check to see we receive at least one pong

	RELAY_COUNTER_RELAY_PONG_PACKET_WRONG_SIZE

	RELAY_COUNTER_RELAY_PING_PACKET_WRONG_SIZE
	RELAY_COUNTER_RELAY_PING_PACKET_EXPIRED
	RELAY_COUNTER_RELAY_PING_PACKET_DID_NOT_VERIFY

	RELAY_COUNTER_ROUTE_REQUEST_PACKET_RECEIVED
	RELAY_COUNTER_ROUTE_REQUEST_PACKET_WRONG_SIZE
	RELAY_COUNTER_ROUTE_REQUEST_PACKET_COULD_NOT_READ_TOKEN
	RELAY_COUNTER_ROUTE_REQUEST_PACKET_TOKEN_EXPIRED
	RELAY_COUNTER_ROUTE_REQUEST_PACKET_INVALID_NEXT_ADDRESS
	RELAY_COUNTER_ROUTE_REQUEST_PACKET_FORWARD_TO_NEXT_HOP_PUBLIC_ADDRESS
	RELAY_COUNTER_ROUTE_REQUEST_PACKET_FORWARD_TO_NEXT_HOP_INTERNAL_ADDRESS

	RELAY_COUNTER_ROUTE_RESPONSE_PACKET_RECEIVED
	RELAY_COUNTER_ROUTE_RESPONSE_PACKET_WRONG_SIZE
	RELAY_COUNTER_ROUTE_RESPONSE_PACKET_COULD_NOT_FIND_SESSION
	RELAY_COUNTER_ROUTE_RESPONSE_PACKET_ALREADY_RECEIVED
	RELAY_COUNTER_ROUTE_RESPONSE_PACKET_HEADER_DID_NOT_VERIFY
	RELAY_COUNTER_ROUTE_RESPONSE_PACKET_FORWARD_TO_PREVIOUS_HOP_PUBLIC_ADDRESS
	RELAY_COUNTER_ROUTE_RESPONSE_PACKET_FORWARD_TO_PREVIOUS_HOP_INTERNAL_ADDRESS

	RELAY_COUNTER_CONTINUE_REQUEST_PACKET_RECEIVED
	RELAY_COUNTER_CONTINUE_REQUEST_PACKET_WRONG_SIZE
	RELAY_COUNTER_CONTINUE_REQUEST_PACKET_COULD_NOT_READ_TOKEN
	RELAY_COUNTER_CONTINUE_REQUEST_PACKET_TOKEN_EXPIRED
	RELAY_COUNTER_CONTINUE_REQUEST_PACKET_COULD_NOT_FIND_SESSION
	RELAY_COUNTER_CONTINUE_REQUEST_PACKET_FORWARD_TO_NEXT_HOP_PUBLIC_ADDRESS
	RELAY_COUNTER_CONTINUE_REQUEST_PACKET_FORWARD_TO_NEXT_HOP_INTERNAL_ADDRESS

	RELAY_COUNTER_CONTINUE_RESPONSE_PACKET_RECEIVED
	RELAY_COUNTER_CONTINUE_RESPONSE_PACKET_WRONG_SIZE
	RELAY_COUNTER_CONTINUE_RESPONSE_PACKET_ALREADY_RECEIVED
	RELAY_COUNTER_CONTINUE_RESPONSE_PACKET_COULD_NOT_FIND_SESSION
	RELAY_COUNTER_CONTINUE_RESPONSE_PACKET_HEADER_DID_NOT_VERIFY
	RELAY_COUNTER_CONTINUE_RESPONSE_PACKET_FORWARD_TO_PREVIOUS_HOP_PUBLIC_ADDRESS
	RELAY_COUNTER_CONTINUE_RESPONSE_PACKET_FORWARD_TO_PREVIOUS_HOP_INTERNAL_ADDRESS

	RELAY_COUNTER_CLIENT_TO_SERVER_PACKET_RECEIVED
	RELAY_COUNTER_CLIENT_TO_SERVER_PACKET_TOO_SMALL
	RELAY_COUNTER_CLIENT_TO_SERVER_PACKET_TOO_BIG
	RELAY_COUNTER_CLIENT_TO_SERVER_PACKET_COULD_NOT_FIND_SESSION
	RELAY_COUNTER_CLIENT_TO_SERVER_PACKET_ALREADY_RECEIVED
	RELAY_COUNTER_CLIENT_TO_SERVER_PACKET_COULD_NOT_VERIFY_HEADER
	RELAY_COUNTER_CLIENT_TO_SERVER_PACKET_FORWARD_TO_NEXT_HOP_PUBLIC_ADDRESS
	RELAY_COUNTER_CLIENT_TO_SERVER_PACKET_FORWARD_TO_NEXT_HOP_INTERNAL_ADDRESS

	RELAY_COUNTER_SERVER_TO_CLIENT_PACKET_RECEIVED
	RELAY_COUNTER_SERVER_TO_CLIENT_PACKET_TOO_SMALL
	RELAY_COUNTER_SERVER_TO_CLIENT_PACKET_TOO_BIG
	RELAY_COUNTER_SERVER_TO_CLIENT_PACKET_COULD_NOT_FIND_SESSION
	RELAY_COUNTER_SERVER_TO_CLIENT_PACKET_ALREADY_RECEIVED
	RELAY_COUNTER_SERVER_TO_CLIENT_PACKET_COULD_NOT_VERIFY_HEADER
	RELAY_COUNTER_SERVER_TO_CLIENT_PACKET_FORWARD_TO_PREVIOUS_HOP_PUBLIC_ADDRESS
	RELAY_COUNTER_SERVER_TO_CLIENT_PACKET_FORWARD_TO_PREVIOUS_HOP_INTERNAL_ADDRESS

	RELAY_COUNTER_SESSION_PING_PACKET_RECEIVED
	RELAY_COUNTER_SESSION_PING_PACKET_WRONG_SIZE
	RELAY_COUNTER_SESSION_PING_PACKET_COULD_NOT_FIND_SESSION
	RELAY_COUNTER_SESSION_PING_PACKET_ALREADY_RECEIVED
	RELAY_COUNTER_SESSION_PING_PACKET_COULD_NOT_VERIFY_HEADER
	RELAY_COUNTER_SESSION_PING_PACKET_FORWARD_TO_NEXT_HOP_PUBLIC_ADDRESS
	RELAY_COUNTER_SESSION_PING_PACKET_FORWARD_TO_NEXT_HOP_INTERNAL_ADDRESS

	RELAY_COUNTER_SESSION_PONG_PACKET_RECEIVED
	RELAY_COUNTER_SESSION_PONG_PACKET_WRONG_SIZE
	RELAY_COUNTER_SESSION_PONG_PACKET_COULD_NOT_FIND_SESSION
	RELAY_COUNTER_SESSION_PONG_PACKET_ALREADY_RECEIVED
	RELAY_COUNTER_SESSION_PONG_PACKET_COULD_NOT_VERIFY_HEADER
	RELAY_COUNTER_SESSION_PONG_PACKET_FORWARD_TO_PREVIOUS_HOP_PUBLIC_ADDRESS
	RELAY_COUNTER_SESSION_PONG_PACKET_FORWARD_TO_PREVIOUS_HOP_INTERNAL_ADDRESS

	RELAY_COUNTER_SESSION_DESTROYED

	RELAY_COUNTER_SESSION_EXPIRED

RELAY

	test_relay_stats

	------------------

	For route tokens to be secure, they must explicitly use the previous address in the token vs. inferring it from the sender

	Otherwise an attacker can shuffle token order and repeat tokens to create loops.

	------------------

	Update all relay func tests to include the previous address

	------------------

	Make sure SDK func tests pass

	------------------

	"run soak-test-relay"

	Relay needs a soak test where random packet data is thrown at it

	Both packets that fail basic packet filter, fail advanced packet filter, and pass advanced packet filter (but have random data...)

	------------------

	Load test relay in google cloud.

	------------------

	Load test relay on bare metal (get some 10G NICs to run locally?)

	------------------

	Randomize the first byte of packets by deterministically adding bytes from the next 15 bytes to it

	------------------
