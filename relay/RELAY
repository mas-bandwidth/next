DONE

	Load test crypto auth (as used in ping token...)

	Has same performance as crypto sign. All good.

	Extend the relay ping packet to include 32 byte signature and expire timestamp (5 seconds in future)

	When processing relay ping packet, ignore if it's expired.

	When processing relay ping packet, ignore if signature doesn't verify.

	Make sure that all relay packets have appropriate size checks.

	Write code to generate the ping token before ping packet send.

	Verify that relay ping/pongs work, with the new relay to relay ping token...

	Verify that relay pong processing goes all the way down to the ping thread.

	If the other relay is internal, generate the ping token according to sender internal relay address.

	If the other relay is internal, verify the ping token according to receiver internal relay address.

	Make this stateless. Put the internal flag inside the ping packet...

	Make sure relay pings still work (packet size changes...)

	Fixed a weird copy paste bug in local only.

	Fix distribution of pings by time.

RELAY

	Add counters corresponding to // todo notes in relay.cpp

	-------

	Implement relay func test framework.

	Add the relay func tests to semaphore...

	-------

	Verify relay catches bad keypairs.

	Verify relay catches any other bad configuration...

	Verify relay times out on startup if it can't init.

	Verify relay can init with backend, and gets ping token.

	Verify relays can ping each other, get pongs, and report up relay stats to the func backend.

	Verify that relays ignore invalid ping tokens, expired ping tokens etc.

	Verify that relays respond to near relay pings

	Verify that relays ignore expired near relay pings, or invalid near relay pings.

	Verify that relays handle changes in magic values every 10 secs for 60 seconds.

	-------

	Verify that the relay won't process any packets until it initializes with the backend.

	Go through each relay packet type and verify each counter (eg. received, wrong size etc etc...)

	-------

	Verify that packets with invalid chonkle are dropped (basic packet filter)

	Verify that packets sent with wrong magic are dropped (advanced packet filter)

	-------

	Verify success path for each packet type

	-------

	Work out some way to test relay internal vs. public addresses

	-------

	Verify relay stats calculations

	-------

























	------------------

	Debug why the happy path is not working on linux

	------------------

	Relay should be load tested in google cloud (driven by terraform)

	------------------

	Relay should be load tested in bare metal with 1G NIC, 10G NIC

	------------------
